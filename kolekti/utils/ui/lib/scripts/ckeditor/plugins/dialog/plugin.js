CKEDITOR.DIALOG_RESIZE_NONE=0;CKEDITOR.DIALOG_RESIZE_WIDTH=1;CKEDITOR.DIALOG_RESIZE_HEIGHT=2;CKEDITOR.DIALOG_RESIZE_BOTH=3;(function(){var a=CKEDITOR.tools.cssLength;function b(G){return!!this._.tabs[G][0].$.offsetHeight;};function c(){var K=this;var G=K._.currentTabId,H=K._.tabIdList.length,I=CKEDITOR.tools.indexOf(K._.tabIdList,G)+H;for(var J=I-1;J>I-H;J--){if(b.call(K,K._.tabIdList[J%H]))return K._.tabIdList[J%H];}return null;};function d(){var K=this;var G=K._.currentTabId,H=K._.tabIdList.length,I=CKEDITOR.tools.indexOf(K._.tabIdList,G);for(var J=I+1;J<I+H;J++){if(b.call(K,K._.tabIdList[J%H]))return K._.tabIdList[J%H];}return null;};function e(G,H){var I=G.$.getElementsByTagName('input');for(var J=0,K=I.length;J<K;J++){var L=new CKEDITOR.dom.element(I[J]);if(L.getAttribute('type').toLowerCase()=='text')if(H){L.setAttribute('value',L.getCustomData('fake_value')||'');L.removeCustomData('fake_value');}else{L.setCustomData('fake_value',L.getAttribute('value'));L.setAttribute('value','');}}};function f(G,H){var J=this;var I=J.getInputElement();if(I)G?I.removeAttribute('aria-invalid'):I.setAttribute('aria-invalid',true);if(!G)if(J.select)J.select();else J.focus();H&&alert(H);J.fire('validated',{valid:G,msg:H});};function g(){var G=this.getInputElement();G&&G.removeAttribute('aria-invalid');};CKEDITOR.dialog=function(G,H){var I=CKEDITOR.dialog._.dialogDefinitions[H],J=CKEDITOR.tools.clone(i),K=G.config.dialog_buttonsOrder||'OS',L=G.lang.dir;if(K=='OS'&&CKEDITOR.env.mac||K=='rtl'&&L=='ltr'||K=='ltr'&&L=='rtl')J.buttons.reverse();I=CKEDITOR.tools.extend(I(G),J);I=CKEDITOR.tools.clone(I);I=new m(this,I);var M=CKEDITOR.document,N=G.theme.buildDialog(G);this._={editor:G,element:N.element,name:H,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:false,focusList:[],currentFocusIndex:0,hasFocus:false};this.parts=N.parts;CKEDITOR.tools.setTimeout(function(){G.fire('ariaWidget',this.parts.contents);},0,this);var O={position:CKEDITOR.env.ie6Compat?'absolute':'fixed',top:0,visibility:'hidden'};O[L=='rtl'?'right':'left']=0;this.parts.dialog.setStyles(O);CKEDITOR.event.call(this);this.definition=I=CKEDITOR.fire('dialogDefinition',{name:H,definition:I},G).definition;var P={};if(!('removeDialogTabs' in G._)&&G.config.removeDialogTabs){var Q=G.config.removeDialogTabs.split(';');for(i=0;i<Q.length;i++){var R=Q[i].split(':');if(R.length==2){var S=R[0];
if(!P[S])P[S]=[];P[S].push(R[1]);}}G._.removeDialogTabs=P;}if(G._.removeDialogTabs&&(P=G._.removeDialogTabs[H]))for(i=0;i<P.length;i++)I.removeContents(P[i]);if(I.onLoad)this.on('load',I.onLoad);if(I.onShow)this.on('show',I.onShow);if(I.onHide)this.on('hide',I.onHide);if(I.onOk)this.on('ok',function(af){G.fire('saveSnapshot');setTimeout(function(){G.fire('saveSnapshot');},0);if(I.onOk.call(this,af)===false)af.data.hide=false;});if(I.onCancel)this.on('cancel',function(af){if(I.onCancel.call(this,af)===false)af.data.hide=false;});var T=this,U=function(af){var ag=T._.contents,ah=false;for(var ai in ag)for(var aj in ag[ai]){ah=af.call(this,ag[ai][aj]);if(ah)return;}};this.on('ok',function(af){U(function(ag){if(ag.validate){var ah=ag.validate(this),ai=typeof ah=='string'||ah===false;if(ai){af.data.hide=false;af.stop();}f.call(ag,!ai,typeof ah=='string'?ah:undefined);return ai;}});},this,null,0);this.on('cancel',function(af){U(function(ag){if(ag.isChanged()){if(!confirm(G.lang.common.confirmCancel))af.data.hide=false;return true;}});},this,null,0);this.parts.close.on('click',function(af){if(this.fire('cancel',{hide:true}).hide!==false)this.hide();af.data.preventDefault();},this);function V(){var af=T._.focusList;af.sort(function(ai,aj){if(ai.tabIndex!=aj.tabIndex)return aj.tabIndex-ai.tabIndex;else return ai.focusIndex-aj.focusIndex;});var ag=af.length;for(var ah=0;ah<ag;ah++)af[ah].focusIndex=ah;};function W(af){var ag=T._.focusList,ah=af?1:-1;if(ag.length<1)return;var ai=T._.currentFocusIndex;try{ag[ai].getInputElement().$.blur();}catch(al){}var aj=(ai+ah+ag.length)%ag.length,ak=aj;while(!ag[ak].isFocusable()){ak=(ak+ah+ag.length)%ag.length;if(ak==aj)break;}ag[ak].focus();if(ag[ak].type=='text')ag[ak].select();};this.changeFocus=W;var X;function Y(af){var ak=this;if(T!=CKEDITOR.dialog._.currentTop)return;var ag=af.data.getKeystroke(),ah=G.lang.dir=='rtl';X=0;if(ag==9||ag==CKEDITOR.SHIFT+9){var ai=ag==CKEDITOR.SHIFT+9;if(T._.tabBarMode){var aj=ai?c.call(T):d.call(T);T.selectPage(aj);T._.tabs[aj][0].focus();}else W(!ai);X=1;}else if(ag==CKEDITOR.ALT+121&&!T._.tabBarMode&&T.getPageCount()>1){T._.tabBarMode=true;T._.tabs[T._.currentTabId][0].focus();X=1;}else if((ag==37||ag==39)&&T._.tabBarMode){aj=ag==(ah?39:37)?c.call(T):d.call(T);T.selectPage(aj);T._.tabs[aj][0].focus();X=1;}else if((ag==13||ag==32)&&T._.tabBarMode){ak.selectPage(ak._.currentTabId);ak._.tabBarMode=false;ak._.currentFocusIndex=-1;W(true);X=1;}if(X){af.stop();af.data.preventDefault();}};function Z(af){X&&af.data.preventDefault();
};var aa=this._.element;this.on('show',function(){aa.on('keydown',Y,this,null,0);if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)aa.on('keypress',Z,this);});this.on('hide',function(){aa.removeListener('keydown',Y);if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)aa.removeListener('keypress',Z);U(function(af){g.apply(af);});});this.on('iframeAdded',function(af){var ag=new CKEDITOR.dom.document(af.data.iframe.$.contentWindow.document);ag.on('keydown',Y,this,null,0);});this.on('show',function(){var aj=this;V();if(G.config.dialog_startupFocusTab&&T._.pageCount>1){T._.tabBarMode=true;T._.tabs[T._.currentTabId][0].focus();}else if(!aj._.hasFocus){aj._.currentFocusIndex=-1;if(I.onFocus){var af=I.onFocus.call(aj);af&&af.focus();}else W(true);if(aj._.editor.mode=='wysiwyg'&&CKEDITOR.env.ie){var ag=G.document.$.selection,ah=ag.createRange();if(ah)if(ah.parentElement&&ah.parentElement().ownerDocument==G.document.$||ah.item&&ah.item(0).ownerDocument==G.document.$){var ai=document.body.createTextRange();ai.moveToElementText(aj.getElement().getFirst().$);ai.collapse(true);ai.select();}}}},this,null,4294967295);if(CKEDITOR.env.ie6Compat)this.on('load',function(af){var ag=this.getElement(),ah=ag.getFirst();ah.remove();ah.appendTo(ag);},this);o(this);p(this);new CKEDITOR.dom.text(I.title,CKEDITOR.document).appendTo(this.parts.title);for(var ab=0;ab<I.contents.length;ab++){var ac=I.contents[ab];ac&&this.addPage(ac);}this.parts.tabs.on('click',function(af){var ai=this;var ag=af.data.getTarget();if(ag.hasClass('cke_dialog_tab')){var ah=ag.$.id;ai.selectPage(ah.substring(4,ah.lastIndexOf('_')));if(ai._.tabBarMode){ai._.tabBarMode=false;ai._.currentFocusIndex=-1;W(true);}af.data.preventDefault();}},this);var ad=[],ae=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:'hbox',className:'cke_dialog_footer_buttons',widths:[],children:I.buttons},ad).getChild();this.parts.footer.setHtml(ad.join(''));for(ab=0;ab<ae.length;ab++)this._.buttons[ae[ab].id]=ae[ab];};function h(G,H,I){this.element=H;this.focusIndex=I;this.tabIndex=0;this.isFocusable=function(){return!H.getAttribute('disabled')&&H.isVisible();};this.focus=function(){G._.currentFocusIndex=this.focusIndex;this.element.focus();};H.on('keydown',function(J){if(J.data.getKeystroke() in {32:1,13:1})this.fire('click');});H.on('focus',function(){this.fire('mouseover');});H.on('blur',function(){this.fire('mouseout');});};CKEDITOR.dialog.prototype={destroy:function(){this.hide();this._.element.remove();},resize:(function(){return function(G,H){var I=this;
if(I._.contentSize&&I._.contentSize.width==G&&I._.contentSize.height==H)return;CKEDITOR.dialog.fire('resize',{dialog:I,skin:I._.editor.skinName,width:G,height:H},I._.editor);I.fire('resize',{skin:I._.editor.skinName,width:G,height:H},I._.editor);if(I._.editor.lang.dir=='rtl'&&I._.position)I._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-I._.contentSize.width-parseInt(I._.element.getFirst().getStyle('right'),10);I._.contentSize={width:G,height:H};};})(),getSize:function(){var G=this._.element.getFirst();return{width:G.$.offsetWidth||0,height:G.$.offsetHeight||0};},move:(function(){var G;return function(H,I,J){var Q=this;var K=Q._.element.getFirst(),L=Q._.editor.lang.dir=='rtl';if(G===undefined)G=K.getComputedStyle('position')=='fixed';if(G&&Q._.position&&Q._.position.x==H&&Q._.position.y==I)return;Q._.position={x:H,y:I};if(!G){var M=CKEDITOR.document.getWindow().getScrollPosition();H+=M.x;I+=M.y;}if(L){var N=Q.getSize(),O=CKEDITOR.document.getWindow().getViewPaneSize();H=O.width-N.width-H;}var P={top:(I>0?I:0)+'px'};P[L?'right':'left']=(H>0?H:0)+'px';K.setStyles(P);J&&(Q._.moved=1);};})(),getPosition:function(){return CKEDITOR.tools.extend({},this._.position);},show:function(){var G=this._.element,H=this.definition;if(!(G.getParent()&&G.getParent().equals(CKEDITOR.document.getBody())))G.appendTo(CKEDITOR.document.getBody());else G.setStyle('display','block');if(CKEDITOR.env.gecko&&CKEDITOR.env.version<10900){var I=this.parts.dialog;I.setStyle('position','absolute');setTimeout(function(){I.setStyle('position','fixed');},0);}this.resize(this._.contentSize&&this._.contentSize.width||H.width||H.minWidth,this._.contentSize&&this._.contentSize.height||H.height||H.minHeight);this.reset();this.selectPage(this.definition.contents[0].id);if(CKEDITOR.dialog._.currentZIndex===null)CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex;this._.element.getFirst().setStyle('z-index',CKEDITOR.dialog._.currentZIndex+=10);if(CKEDITOR.dialog._.currentTop===null){CKEDITOR.dialog._.currentTop=this;this._.parentDialog=null;u(this._.editor);G.on('keydown',y);G.on(CKEDITOR.env.opera?'keypress':'keyup',z);for(var J in {keyup:1,keydown:1,keypress:1})G.on(J,F);}else{this._.parentDialog=CKEDITOR.dialog._.currentTop;var K=this._.parentDialog.getElement().getFirst();K.$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2);CKEDITOR.dialog._.currentTop=this;}A(this,this,'\x1b',null,function(){this.getButton('cancel')&&this.getButton('cancel').click();
});this._.hasFocus=false;CKEDITOR.tools.setTimeout(function(){this.layout();this.parts.dialog.setStyle('visibility','');this.fireOnce('load',{});CKEDITOR.ui.fire('ready',this);this.fire('show',{});this._.editor.fire('dialogShow',this);this.foreach(function(L){L.setInitValue&&L.setInitValue();});},100,this);},layout:function(){var I=this;var G=CKEDITOR.document.getWindow().getViewPaneSize(),H=I.getSize();I.move(I._.moved?I._.position.x:(G.width-H.width)/2,I._.moved?I._.position.y:(G.height-H.height)/2);},foreach:function(G){var J=this;for(var H in J._.contents)for(var I in J._.contents[H])G.call(J,J._.contents[H][I]);return J;},reset:(function(){var G=function(H){if(H.reset)H.reset(1);};return function(){this.foreach(G);return this;};})(),setupContent:function(){var G=arguments;this.foreach(function(H){if(H.setup)H.setup.apply(H,G);});},commitContent:function(){var G=arguments;this.foreach(function(H){if(CKEDITOR.env.ie&&this._.currentFocusIndex==H.focusIndex)H.getInputElement().$.blur();if(H.commit)H.commit.apply(H,G);});},hide:function(){if(!this.parts.dialog.isVisible())return;this.fire('hide',{});this._.editor.fire('dialogHide',this);var G=this._.element;G.setStyle('display','none');this.parts.dialog.setStyle('visibility','hidden');B(this);while(CKEDITOR.dialog._.currentTop!=this)CKEDITOR.dialog._.currentTop.hide();if(!this._.parentDialog)v();else{var H=this._.parentDialog.getElement().getFirst();H.setStyle('z-index',parseInt(H.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2));}CKEDITOR.dialog._.currentTop=this._.parentDialog;if(!this._.parentDialog){CKEDITOR.dialog._.currentZIndex=null;G.removeListener('keydown',y);G.removeListener(CKEDITOR.env.opera?'keypress':'keyup',z);for(var I in {keyup:1,keydown:1,keypress:1})G.removeListener(I,F);var J=this._.editor;J.focus();if(J.mode=='wysiwyg'&&CKEDITOR.env.ie){var K=J.getSelection();K&&K.unlock(true);}}else CKEDITOR.dialog._.currentZIndex-=10;delete this._.parentDialog;this.foreach(function(L){L.resetInitValue&&L.resetInitValue();});},addPage:function(G){var S=this;var H=[],I=G.label?' title="'+CKEDITOR.tools.htmlEncode(G.label)+'"':'',J=G.elements,K=CKEDITOR.dialog._.uiElementBuilders.vbox.build(S,{type:'vbox',className:'cke_dialog_page_contents',children:G.elements,expand:!!G.expand,padding:G.padding,style:G.style||'width: 100%;height:100%'},H),L=CKEDITOR.dom.element.createFromHtml(H.join(''));L.setAttribute('role','tabpanel');var M=CKEDITOR.env,N='cke_'+G.id+'_'+CKEDITOR.tools.getNextNumber(),O=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',S._.pageCount>0?' cke_last':'cke_first',I,!!G.hidden?' style="display:none"':'',' id="',N,'"',M.gecko&&M.version>=10900&&!M.hc?'':' href="javascript:void(0)"',' tabIndex="-1"',' hidefocus="true"',' role="tab">',G.label,'</a>'].join(''));
L.setAttribute('aria-labelledby',N);S._.tabs[G.id]=[O,L];S._.tabIdList.push(G.id);!G.hidden&&S._.pageCount++;S._.lastTab=O;S.updateStyle();var P=S._.contents[G.id]={},Q,R=K.getChild();while(Q=R.shift()){P[Q.id]=Q;if(typeof Q.getChild=='function')R.push.apply(R,Q.getChild());}L.setAttribute('name',G.id);L.appendTo(S.parts.contents);O.unselectable();S.parts.tabs.append(O);if(G.accessKey){A(S,S,'CTRL+'+G.accessKey,D,C);S._.accessKeyMap['CTRL+'+G.accessKey]=G.id;}},selectPage:function(G){if(this._.currentTabId==G)return;if(this.fire('selectPage',{page:G,currentPage:this._.currentTabId})===true)return;for(var H in this._.tabs){var I=this._.tabs[H][0],J=this._.tabs[H][1];if(H!=G){I.removeClass('cke_dialog_tab_selected');J.hide();}J.setAttribute('aria-hidden',H!=G);}var K=this._.tabs[G];K[0].addClass('cke_dialog_tab_selected');if(CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat){e(K[1]);K[1].show();setTimeout(function(){e(K[1],1);},0);}else K[1].show();this._.currentTabId=G;this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,G);},updateStyle:function(){this.parts.dialog[(this._.pageCount===1?'add':'remove')+'Class']('cke_single_page');},hidePage:function(G){var I=this;var H=I._.tabs[G]&&I._.tabs[G][0];if(!H||I._.pageCount==1||!H.isVisible())return;else if(G==I._.currentTabId)I.selectPage(c.call(I));H.hide();I._.pageCount--;I.updateStyle();},showPage:function(G){var I=this;var H=I._.tabs[G]&&I._.tabs[G][0];if(!H)return;H.show();I._.pageCount++;I.updateStyle();},getElement:function(){return this._.element;},getName:function(){return this._.name;},getContentElement:function(G,H){var I=this._.contents[G];return I&&I[H];},getValueOf:function(G,H){return this.getContentElement(G,H).getValue();},setValueOf:function(G,H,I){return this.getContentElement(G,H).setValue(I);},getButton:function(G){return this._.buttons[G];},click:function(G){return this._.buttons[G].click();},disableButton:function(G){return this._.buttons[G].disable();},enableButton:function(G){return this._.buttons[G].enable();},getPageCount:function(){return this._.pageCount;},getParentEditor:function(){return this._.editor;},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement();},addFocusable:function(G,H){var J=this;if(typeof H=='undefined'){H=J._.focusList.length;J._.focusList.push(new h(J,G,H));}else{J._.focusList.splice(H,0,new h(J,G,H));for(var I=H+1;I<J._.focusList.length;I++)J._.focusList[I].focusIndex++;}}};CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(G,H){if(!this._.dialogDefinitions[G]||typeof H=='function')this._.dialogDefinitions[G]=H;
},exists:function(G){return!!this._.dialogDefinitions[G];},getCurrent:function(){return CKEDITOR.dialog._.currentTop;},okButton:(function(){var G=function(H,I){I=I||{};return CKEDITOR.tools.extend({id:'ok',type:'button',label:H.lang.common.ok,'class':'cke_dialog_ui_button_ok',onClick:function(J){var K=J.data.dialog;if(K.fire('ok',{hide:true}).hide!==false)K.hide();}},I,true);};G.type='button';G.override=function(H){return CKEDITOR.tools.extend(function(I){return G(I,H);},{type:'button'},true);};return G;})(),cancelButton:(function(){var G=function(H,I){I=I||{};return CKEDITOR.tools.extend({id:'cancel',type:'button',label:H.lang.common.cancel,'class':'cke_dialog_ui_button_cancel',onClick:function(J){var K=J.data.dialog;if(K.fire('cancel',{hide:true}).hide!==false)K.hide();}},I,true);};G.type='button';G.override=function(H){return CKEDITOR.tools.extend(function(I){return G(I,H);},{type:'button'},true);};return G;})(),addUIElement:function(G,H){this._.uiElementBuilders[G]=H;}});CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};CKEDITOR.event.implementOn(CKEDITOR.dialog);CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype,true);var i={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},j=function(G,H,I){for(var J=0,K;K=G[J];J++){if(K.id==H)return K;if(I&&K[I]){var L=j(K[I],H,I);if(L)return L;}}return null;},k=function(G,H,I,J,K){if(I){for(var L=0,M;M=G[L];L++){if(M.id==I){G.splice(L,0,H);return H;}if(J&&M[J]){var N=k(M[J],H,I,J,true);if(N)return N;}}if(K)return null;}G.push(H);return H;},l=function(G,H,I){for(var J=0,K;K=G[J];J++){if(K.id==H)return G.splice(J,1);if(I&&K[I]){var L=l(K[I],H,I);if(L)return L;}}return null;},m=function(G,H){this.dialog=G;var I=H.contents;for(var J=0,K;K=I[J];J++)I[J]=K&&new n(G,K);CKEDITOR.tools.extend(this,H);};m.prototype={getContents:function(G){return j(this.contents,G);},getButton:function(G){return j(this.buttons,G);},addContents:function(G,H){return k(this.contents,G,H);},addButton:function(G,H){return k(this.buttons,G,H);},removeContents:function(G){l(this.contents,G);},removeButton:function(G){l(this.buttons,G);}};function n(G,H){this._={dialog:G};CKEDITOR.tools.extend(this,H);};n.prototype={get:function(G){return j(this.elements,G,'children');},add:function(G,H){return k(this.elements,G,H,'children');},remove:function(G){l(this.elements,G,'children');}};function o(G){var H=null,I=null,J=G.getElement().getFirst(),K=G.getParentEditor(),L=K.config.dialog_magnetDistance,M=K.skin.margins||[0,0,0,0];
if(typeof L=='undefined')L=20;function N(P){var Q=G.getSize(),R=CKEDITOR.document.getWindow().getViewPaneSize(),S=P.data.$.screenX,T=P.data.$.screenY,U=S-H.x,V=T-H.y,W,X;H={x:S,y:T};I.x+=U;I.y+=V;if(I.x+M[3]<L)W=-M[3];else if(I.x-M[1]>R.width-Q.width-L)W=R.width-Q.width+(K.lang.dir=='rtl'?0:M[1]);else W=I.x;if(I.y+M[0]<L)X=-M[0];else if(I.y-M[2]>R.height-Q.height-L)X=R.height-Q.height+M[2];else X=I.y;G.move(W,X,1);P.data.preventDefault();};function O(P){CKEDITOR.document.removeListener('mousemove',N);CKEDITOR.document.removeListener('mouseup',O);if(CKEDITOR.env.ie6Compat){var Q=s.getChild(0).getFrameDocument();Q.removeListener('mousemove',N);Q.removeListener('mouseup',O);}};G.parts.title.on('mousedown',function(P){H={x:P.data.$.screenX,y:P.data.$.screenY};CKEDITOR.document.on('mousemove',N);CKEDITOR.document.on('mouseup',O);I=G.getPosition();if(CKEDITOR.env.ie6Compat){var Q=s.getChild(0).getFrameDocument();Q.on('mousemove',N);Q.on('mouseup',O);}P.data.preventDefault();},G);};function p(G){var H=G.definition,I=H.resizable;if(I==CKEDITOR.DIALOG_RESIZE_NONE)return;var J=G.getParentEditor(),K,L,M,N,O,P,Q=CKEDITOR.tools.addFunction(function(T){O=G.getSize();var U=G.parts.contents,V=U.$.getElementsByTagName('iframe').length;if(V){P=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>');U.append(P);}L=O.height-G.parts.contents.getSize('height',!(CKEDITOR.env.gecko||CKEDITOR.env.opera||CKEDITOR.env.ie&&CKEDITOR.env.quirks));K=O.width-G.parts.contents.getSize('width',1);N={x:T.screenX,y:T.screenY};M=CKEDITOR.document.getWindow().getViewPaneSize();CKEDITOR.document.on('mousemove',R);CKEDITOR.document.on('mouseup',S);if(CKEDITOR.env.ie6Compat){var W=s.getChild(0).getFrameDocument();W.on('mousemove',R);W.on('mouseup',S);}T.preventDefault&&T.preventDefault();});G.on('load',function(){var T='';if(I==CKEDITOR.DIALOG_RESIZE_WIDTH)T=' cke_resizer_horizontal';else if(I==CKEDITOR.DIALOG_RESIZE_HEIGHT)T=' cke_resizer_vertical';var U=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+T+' cke_resizer_'+J.lang.dir+'"'+' title="'+CKEDITOR.tools.htmlEncode(J.lang.resize)+'"'+' onmousedown="CKEDITOR.tools.callFunction('+Q+', event )"></div>');G.parts.footer.append(U,1);});J.on('destroy',function(){CKEDITOR.tools.removeFunction(Q);});function R(T){var U=J.lang.dir=='rtl',V=(T.data.$.screenX-N.x)*(U?-1:1),W=T.data.$.screenY-N.y,X=O.width,Y=O.height,Z=X+V*(G._.moved?1:2),aa=Y+W*(G._.moved?1:2),ab=G._.element.getFirst(),ac=U&&ab.getComputedStyle('right'),ad=G.getPosition();
if(ad.y+aa>M.height)aa=M.height-ad.y;if((U?ac:ad.x)+Z>M.width)Z=M.width-(U?ac:ad.x);if(I==CKEDITOR.DIALOG_RESIZE_WIDTH||I==CKEDITOR.DIALOG_RESIZE_BOTH)X=Math.max(H.minWidth||0,Z-K);if(I==CKEDITOR.DIALOG_RESIZE_HEIGHT||I==CKEDITOR.DIALOG_RESIZE_BOTH)Y=Math.max(H.minHeight||0,aa-L);G.resize(X,Y);if(!G._.moved)G.layout();T.data.preventDefault();};function S(){CKEDITOR.document.removeListener('mouseup',S);CKEDITOR.document.removeListener('mousemove',R);if(P){P.remove();P=null;}if(CKEDITOR.env.ie6Compat){var T=s.getChild(0).getFrameDocument();T.removeListener('mouseup',S);T.removeListener('mousemove',R);}};};var q,r={},s;function t(G){G.data.preventDefault(1);};function u(G){var H=CKEDITOR.document.getWindow(),I=G.config,J=I.dialog_backgroundCoverColor||'white',K=I.dialog_backgroundCoverOpacity,L=I.baseFloatZIndex,M=CKEDITOR.tools.genKey(J,K,L),N=r[M];if(!N){var O=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?'absolute':'fixed','; z-index: ',L,'; top: 0px; left: 0px; ',!CKEDITOR.env.ie6Compat?'background-color: '+J:'','" class="cke_dialog_background_cover">'];if(CKEDITOR.env.ie6Compat){var P=CKEDITOR.env.isCustomDomain(),Q="<html><body style=\\'background-color:"+J+";\\'></body></html>";O.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:');O.push('void((function(){document.open();'+(P?"document.domain='"+document.domain+"';":'')+"document.write( '"+Q+"' );"+'document.close();'+'})())');O.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>');}O.push('</div>');N=CKEDITOR.dom.element.createFromHtml(O.join(''));N.setOpacity(K!=undefined?K:0.5);N.on('keydown',t);N.on('keypress',t);N.on('keyup',t);N.appendTo(CKEDITOR.document.getBody());r[M]=N;}else N.show();s=N;var R=function(){var U=H.getViewPaneSize();N.setStyles({width:U.width+'px',height:U.height+'px'});},S=function(){var U=H.getScrollPosition(),V=CKEDITOR.dialog._.currentTop;N.setStyles({left:U.x+'px',top:U.y+'px'});if(V)do{var W=V.getPosition();V.move(W.x,W.y);}while(V=V._.parentDialog)};q=R;H.on('resize',R);R();if(!(CKEDITOR.env.mac&&CKEDITOR.env.webkit))N.focus();if(CKEDITOR.env.ie6Compat){var T=function(){S();arguments.callee.prevScrollHandler.apply(this,arguments);};H.$.setTimeout(function(){T.prevScrollHandler=window.onscroll||(function(){});window.onscroll=T;},0);S();}};function v(){if(!s)return;var G=CKEDITOR.document.getWindow();s.hide();G.removeListener('resize',q);
if(CKEDITOR.env.ie6Compat)G.$.setTimeout(function(){var H=window.onscroll&&window.onscroll.prevScrollHandler;window.onscroll=H||null;},0);q=null;};function w(){for(var G in r)r[G].remove();r={};};var x={},y=function(G){var H=G.data.$.ctrlKey||G.data.$.metaKey,I=G.data.$.altKey,J=G.data.$.shiftKey,K=String.fromCharCode(G.data.$.keyCode),L=x[(H?'CTRL+':'')+(I?'ALT+':'')+(J?'SHIFT+':'')+K];if(!L||!L.length)return;L=L[L.length-1];L.keydown&&L.keydown.call(L.uiElement,L.dialog,L.key);G.data.preventDefault();},z=function(G){var H=G.data.$.ctrlKey||G.data.$.metaKey,I=G.data.$.altKey,J=G.data.$.shiftKey,K=String.fromCharCode(G.data.$.keyCode),L=x[(H?'CTRL+':'')+(I?'ALT+':'')+(J?'SHIFT+':'')+K];if(!L||!L.length)return;L=L[L.length-1];if(L.keyup){L.keyup.call(L.uiElement,L.dialog,L.key);G.data.preventDefault();}},A=function(G,H,I,J,K){var L=x[I]||(x[I]=[]);L.push({uiElement:G,dialog:H,key:I,keyup:K||G.accessKeyUp,keydown:J||G.accessKeyDown});},B=function(G){for(var H in x){var I=x[H];for(var J=I.length-1;J>=0;J--){if(I[J].dialog==G||I[J].uiElement==G)I.splice(J,1);}if(I.length===0)delete x[H];}},C=function(G,H){if(G._.accessKeyMap[H])G.selectPage(G._.accessKeyMap[H]);},D=function(G,H){},E={27:1,13:1},F=function(G){if(G.data.getKeystroke() in E)G.data.stopPropagation();};(function(){CKEDITOR.ui.dialog={uiElement:function(G,H,I,J,K,L,M){if(arguments.length<4)return;var N=(J.call?J(H):J)||'div',O=['<',N,' '],P=(K&&K.call?K(H):K)||{},Q=(L&&L.call?L(H):L)||{},R=(M&&M.call?M.call(this,G,H):M)||'',S=this.domId=Q.id||CKEDITOR.tools.getNextId()+'_uiElement',T=this.id=H.id,U;Q.id=S;var V={};if(H.type)V['cke_dialog_ui_'+H.type]=1;if(H.className)V[H.className]=1;if(H.disabled)V.cke_disabled=1;var W=Q['class']&&Q['class'].split?Q['class'].split(' '):[];for(U=0;U<W.length;U++){if(W[U])V[W[U]]=1;}var X=[];for(U in V)X.push(U);Q['class']=X.join(' ');if(H.title)Q.title=H.title;var Y=(H.style||'').split(';');if(H.align){var Z=H.align;P['margin-left']=Z=='left'?0:'auto';P['margin-right']=Z=='right'?0:'auto';}for(U in P)Y.push(U+':'+P[U]);if(H.hidden)Y.push('display:none');for(U=Y.length-1;U>=0;U--){if(Y[U]==='')Y.splice(U,1);}if(Y.length>0)Q.style=(Q.style?Q.style+'; ':'')+Y.join('; ');for(U in Q)O.push(U+'="'+CKEDITOR.tools.htmlEncode(Q[U])+'" ');O.push('>',R,'</',N,'>');I.push(O.join(''));(this._||(this._={})).dialog=G;if(typeof H.isChanged=='boolean')this.isChanged=function(){return H.isChanged;};if(typeof H.isChanged=='function')this.isChanged=H.isChanged;if(typeof H.setValue=='function')this.setValue=CKEDITOR.tools.override(this.setValue,function(ab){return function(ac){ab.call(this,H.setValue.call(this,ac));
};});if(typeof H.getValue=='function')this.getValue=CKEDITOR.tools.override(this.getValue,function(ab){return function(){return H.getValue.call(this,ab.call(this));};});CKEDITOR.event.implementOn(this);this.registerEvents(H);if(this.accessKeyUp&&this.accessKeyDown&&H.accessKey)A(this,G,'CTRL+'+H.accessKey);var aa=this;G.on('load',function(){var ab=aa.getInputElement();if(ab){var ac=aa.type in {checkbox:1,ratio:1}&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?'cke_dialog_ui_focused':'';ab.on('focus',function(){G._.tabBarMode=false;G._.hasFocus=true;aa.fire('focus');ac&&this.addClass(ac);});ab.on('blur',function(){aa.fire('blur');ac&&this.removeClass(ac);});}});if(this.keyboardFocusable){this.tabIndex=H.tabIndex||0;this.focusIndex=G._.focusList.push(this)-1;this.on('focus',function(){G._.currentFocusIndex=aa.focusIndex;});}CKEDITOR.tools.extend(this,H);},hbox:function(G,H,I,J,K){if(arguments.length<4)return;this._||(this._={});var L=this._.children=H,M=K&&K.widths||null,N=K&&K.height||null,O={},P,Q=function(){var S=['<tbody><tr class="cke_dialog_ui_hbox">'];for(P=0;P<I.length;P++){var T='cke_dialog_ui_hbox_child',U=[];if(P===0)T='cke_dialog_ui_hbox_first';if(P==I.length-1)T='cke_dialog_ui_hbox_last';S.push('<td class="',T,'" role="presentation" ');if(M){if(M[P])U.push('width:'+a(M[P]));}else U.push('width:'+Math.floor(100/I.length)+'%');if(N)U.push('height:'+a(N));if(K&&K.padding!=undefined)U.push('padding:'+a(K.padding));if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&L[P].align)U.push('text-align:'+L[P].align);if(U.length>0)S.push('style="'+U.join('; ')+'" ');S.push('>',I[P],'</td>');}S.push('</tr></tbody>');return S.join('');},R={role:'presentation'};K&&K.align&&(R.align=K.align);CKEDITOR.ui.dialog.uiElement.call(this,G,K||{type:'hbox'},J,'table',O,R,Q);},vbox:function(G,H,I,J,K){if(arguments.length<3)return;this._||(this._={});var L=this._.children=H,M=K&&K.width||null,N=K&&K.heights||null,O=function(){var P=['<table role="presentation" cellspacing="0" border="0" '];P.push('style="');if(K&&K.expand)P.push('height:100%;');P.push('width:'+a(M||'100%'),';');P.push('"');P.push('align="',CKEDITOR.tools.htmlEncode(K&&K.align||(G.getParentEditor().lang.dir=='ltr'?'left':'right')),'" ');P.push('><tbody>');for(var Q=0;Q<I.length;Q++){var R=[];P.push('<tr><td role="presentation" ');if(M)R.push('width:'+a(M||'100%'));if(N)R.push('height:'+a(N[Q]));else if(K&&K.expand)R.push('height:'+Math.floor(100/I.length)+'%');if(K&&K.padding!=undefined)R.push('padding:'+a(K.padding));if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&L[Q].align)R.push('text-align:'+L[Q].align);
if(R.length>0)P.push('style="',R.join('; '),'" ');P.push(' class="cke_dialog_ui_vbox_child">',I[Q],'</td></tr>');}P.push('</tbody></table>');return P.join('');};CKEDITOR.ui.dialog.uiElement.call(this,G,K||{type:'vbox'},J,'div',null,{role:'presentation'},O);}};})();CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId);},getInputElement:function(){return this.getElement();},getDialog:function(){return this._.dialog;},setValue:function(G,H){this.getInputElement().setValue(G);!H&&this.fire('change',{value:G});return this;},getValue:function(){return this.getInputElement().getValue();},isChanged:function(){return false;},selectParentTab:function(){var J=this;var G=J.getInputElement(),H=G,I;while((H=H.getParent())&&H.$.className.search('cke_dialog_page_contents')==-1){}if(!H)return J;I=H.getAttribute('name');if(J._.dialog._.currentTabId!=I)J._.dialog.selectPage(I);return J;},focus:function(){this.selectParentTab().getInputElement().focus();return this;},registerEvents:function(G){var H=/^on([A-Z]\w+)/,I,J=function(L,M,N,O){M.on('load',function(){L.getInputElement().on(N,O,L);});};for(var K in G){if(!(I=K.match(H)))continue;if(this.eventProcessors[K])this.eventProcessors[K].call(this,this._.dialog,G[K]);else J(this,this._.dialog,I[1].toLowerCase(),G[K]);}return this;},eventProcessors:{onLoad:function(G,H){G.on('load',H,this);},onShow:function(G,H){G.on('show',H,this);},onHide:function(G,H){G.on('hide',H,this);}},accessKeyDown:function(G,H){this.focus();},accessKeyUp:function(G,H){},disable:function(){var G=this.getElement(),H=this.getInputElement();H.setAttribute('disabled','true');G.addClass('cke_disabled');},enable:function(){var G=this.getElement(),H=this.getInputElement();H.removeAttribute('disabled');G.removeClass('cke_disabled');},isEnabled:function(){return!this.getElement().hasClass('cke_disabled');},isVisible:function(){return this.getInputElement().isVisible();},isFocusable:function(){if(!this.isEnabled()||!this.isVisible())return false;return true;}};CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement(),{getChild:function(G){var H=this;if(arguments.length<1)return H._.children.concat();if(!G.splice)G=[G];if(G.length<2)return H._.children[G[0]];else return H._.children[G[0]]&&H._.children[G[0]].getChild?H._.children[G[0]].getChild(G.slice(1,G.length)):null;}},true);CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox();(function(){var G={build:function(H,I,J){var K=I.children,L,M=[],N=[];
for(var O=0;O<K.length&&(L=K[O]);O++){var P=[];M.push(P);N.push(CKEDITOR.dialog._.uiElementBuilders[L.type].build(H,L,P));}return new CKEDITOR.ui.dialog[I.type](H,N,M,J,I);}};CKEDITOR.dialog.addUIElement('hbox',G);CKEDITOR.dialog.addUIElement('vbox',G);})();CKEDITOR.dialogCommand=function(G){this.dialogName=G;};CKEDITOR.dialogCommand.prototype={exec:function(G){CKEDITOR.env.opera?CKEDITOR.tools.setTimeout(function(){G.openDialog(this.dialogName);},0,this):G.openDialog(this.dialogName);},canUndo:false,editorFocus:CKEDITOR.env.ie||CKEDITOR.env.webkit};(function(){var G=/^([a]|[^a])+$/,H=/^\d*$/,I=/^\d*(?:\.\d+)?$/,J=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,K=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,L=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1;CKEDITOR.VALIDATE_AND=2;CKEDITOR.dialog.validate={functions:function(){var M=arguments;return function(){var N=this&&this.getValue?this.getValue():M[0],O=undefined,P=CKEDITOR.VALIDATE_AND,Q=[],R;for(R=0;R<M.length;R++){if(typeof M[R]=='function')Q.push(M[R]);else break;}if(R<M.length&&typeof M[R]=='string'){O=M[R];R++;}if(R<M.length&&typeof M[R]=='number')P=M[R];var S=P==CKEDITOR.VALIDATE_AND?true:false;for(R=0;R<Q.length;R++){if(P==CKEDITOR.VALIDATE_AND)S=S&&Q[R](N);else S=S||Q[R](N);}return!S?O:true;};},regex:function(M,N){return function(){var O=this&&this.getValue?this.getValue():arguments[0];return!M.test(O)?N:true;};},notEmpty:function(M){return this.regex(G,M);},integer:function(M){return this.regex(H,M);},number:function(M){return this.regex(I,M);},cssLength:function(M){return this.functions(function(N){return K.test(CKEDITOR.tools.trim(N));},M);},htmlLength:function(M){return this.functions(function(N){return J.test(CKEDITOR.tools.trim(N));},M);},inlineStyle:function(M){return this.functions(function(N){return L.test(CKEDITOR.tools.trim(N));},M);},equals:function(M,N){return this.functions(function(O){return O==M;},N);},notEqual:function(M,N){return this.functions(function(O){return O!=M;},N);}};CKEDITOR.on('instanceDestroyed',function(M){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){var N;while(N=CKEDITOR.dialog._.currentTop)N.hide();w();}var O=M.editor._.storedDialogs;for(var P in O)O[P].destroy();});})();CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(G,H){if(this.mode=='wysiwyg'&&CKEDITOR.env.ie){var I=this.getSelection();I&&I.lock();}var J=CKEDITOR.dialog._.dialogDefinitions[G],K=this.skin.dialog;if(CKEDITOR.dialog._.currentTop===null)u(this);if(typeof J=='function'&&K._isLoaded){var L=this._.storedDialogs||(this._.storedDialogs={}),M=L[G]||(L[G]=new CKEDITOR.dialog(this,G));
H&&H.call(M,M);M.show();return M;}else if(J=='failed'){v();throw new Error('[CKEDITOR.dialog.openDialog] Dialog "'+G+'" failed when loading definition.');}var N=this;function O(Q){var R=CKEDITOR.dialog._.dialogDefinitions[G],S=N.skin.dialog;if(!S._isLoaded||P&&typeof Q=='undefined')return;if(typeof R!='function')CKEDITOR.dialog._.dialogDefinitions[G]='failed';N.openDialog(G,H);};if(typeof J=='string'){var P=1;CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(J),O,null,0,1);}CKEDITOR.skins.load(this,'dialog',O);return null;}});})();CKEDITOR.plugins.add('dialog',{requires:['dialogui']});
