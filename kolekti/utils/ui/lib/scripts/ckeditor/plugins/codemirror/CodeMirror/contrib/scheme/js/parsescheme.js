var SchemeParser=Editor.Parser=(function(){var b=function(A){return A==='('||A==='['||A==='{';},c=function(A){return A===')'||A===']'||A==='}';},d=function(A,B){return A==='('&&B===')'||A==='['&&B===']'||A==='{'&&B==='}';},e=function(A){var B=[],C=[],D=0,E,F,G,H,I=[];while(!w(A)){D++;I.push(u(A));if(b(u(A).type)){if(C.length===0)break;else if(d(u(A).value,C[C.length-1]))C.pop();else return B;}else if(c(u(A).type))C.push(u(A).type);A=v(A);}if(w(A))return B;A=v(A);while(!w(A)){if(u(A).type==='whitespace'&&u(A).value==='\n')break;I.push(u(A));A=v(A);}F=0;G=0;H=[];for(E=I.length-1;E>=0;E--){if(E<D)H.push({type:I[E].type,value:I[E].value,line:F,column:G});if(I[E].type==='whitespace'&&I[E].value==='\n'){G=0;F++;}else G+=I[E].value.length;}return H;},f=function(A,B){if(A.length===0)return 0;if(j(A))return k(A);if(m(A))return n(A);if(p(A))return q(A);return k(A,0);},g=function(A,B){var C=0;for(var D=0;D<A.length;D++){if(A[D].type!=='whitespace'&&C===1){if(B===0)return D;else B--;}if(b(A[D].type))C++;if(c(A[D].type))C=Math.max(C-1,0);}return-1;},h=function(A){var B=0,C,D=[];while((C=g(A,B++))!=-1)D.push(C);return D;},i=['case-lambda','compound-unit','compound-unit/sig','cond','delay','inherit','match-lambda','match-lambda*','override','private','public','sequence','unit'],j=function(A){var B=g(A,0);if(B===-1)return false;return/^begin/.test(A[B].value)||r(A[B].value,i);},k=function(A,B){if(typeof B==='undefined')B=1;var C=h(A),D;if(C.length===0)return A[0].column+1;else if(C.length===1)return A[C[0]].column+B;else{for(D=C.length-1;D>1;D--){if(A[C[D]].line!==A[C[D-1]].line)return A[C[D]].column;}return A[C[D]].column;}},l=['local'],m=function(A){var B=g(A,0);if(B===-1)return false;return/^def/.test(A[B].value)||r(A[B].value,l);},n=function(A){var B=g(A,0);if(B===-1)return 0;return A[B].column+1;},o=['cases','instantiate','super-instantiate','syntax/loc','quasisyntax/loc','lambda','let','let*','letrec','recur','lambda/kw','letrec-values','with-syntax','with-continuation-mark','module','match','match-let','match-let*','match-letrec','let/cc','let/ec','letcc','catch','let-syntax','letrec-syntax','fluid-let-syntax','letrec-syntaxes+values','for','for/list','for/hash','for/hasheq','for/and','for/or','for/lists','for/first','for/last','for/fold','for*','for*/list','for*/hash','for*/hasheq','for*/and','for*/or','for*/lists','for*/first','for*/last','for*/fold','kernel-syntax-case','syntax-case','syntax-case*','syntax-rules','syntax-id-rules','let-signature','fluid-let','let-struct','let-macro','let-values','let*-values','case','when','unless','let-enumerate','class','class*','class-asi','class-asi*','class*/names','class100','class100*','class100-asi','class100-asi*','class100*/names','rec','make-object','mixin','define-some','do','opt-lambda','send*','with-method','define-record','catch','shared','unit/sig','unit/lang','with-handlers','interface','parameterize','call-with-input-file','call-with-input-file*','with-input-from-file','with-input-from-port','call-with-output-file','with-output-to-file','with-output-to-port','for-all'],p=function(A){var B=g(A,0);
if(B===-1)return false;return r(A[B].value,o);},q=function(A){var B=g(A,0);if(B===-1)return 0;var C=g(A,1);if(C===-1)return A[B].column+4;else return A[B].column+1;},r=function(A,B){for(var C=0;C<B.length;C++){if(A===B[C])return true;}return false;},s=function(A,B){return[A,B];},t=[],u=function(A){return A[0];},v=function(A){return A[1];},w=function(A){return A===t;},x=function(A){var B=0;while(!w(A))A=v(A);return B;},y=function(A){return function(B,C,D){if(!w(A)&&!w(v(A))&&u(v(A)).isUnclosed)return C;var E=e(A);return f(E,C);};},z=function(A){A=tokenizeScheme(A);var B=t,C={next:function(){var D=A.next();B=s(D,B);if(D.type==='whitespace'){if(D.value==='\n')D.indentation=y(B);}return D;},copy:function(){var D=B,E=A.state;return function(F){B=D;A=tokenizeScheme(F,E);return C;};}};return C;};return{make:z};})();
