var SqlParser=Editor.Parser=(function(){function b(m){return new RegExp('^(?:'+m.join('|')+')$','i');};var c=b(['abs','acos','adddate','aes_encrypt','aes_decrypt','ascii','asin','atan','atan2','avg','benchmark','bin','bit_and','bit_count','bit_length','bit_or','cast','ceil','ceiling','char_length','character_length','coalesce','concat','concat_ws','connection_id','conv','convert','cos','cot','count','curdate','current_date','current_time','current_timestamp','current_user','curtime','database','date_add','date_format','date_sub','dayname','dayofmonth','dayofweek','dayofyear','decode','degrees','des_encrypt','des_decrypt','elt','encode','encrypt','exp','export_set','extract','field','find_in_set','floor','format','found_rows','from_days','from_unixtime','get_lock','greatest','group_unique_users','hex','ifnull','inet_aton','inet_ntoa','instr','interval','is_free_lock','isnull','last_insert_id','lcase','least','left','length','ln','load_file','locate','log','log2','log10','lower','lpad','ltrim','make_set','master_pos_wait','max','md5','mid','min','mod','monthname','now','nullif','oct','octet_length','ord','password','period_add','period_diff','pi','position','pow','power','quarter','quote','radians','rand','release_lock','repeat','reverse','right','round','rpad','rtrim','sec_to_time','session_user','sha','sha1','sign','sin','soundex','space','sqrt','std','stddev','strcmp','subdate','substring','substring_index','sum','sysdate','system_user','tan','time_format','time_to_sec','to_days','trim','ucase','unique_users','unix_timestamp','upper','user','version','week','weekday','yearweek']),d=b(['alter','grant','revoke','primary','key','table','start','top','transaction','select','update','insert','delete','create','describe','from','into','values','where','join','inner','left','natural','and','or','in','not','xor','like','using','on','order','group','by','asc','desc','limit','offset','union','all','as','distinct','set','commit','rollback','replace','view','database','separator','if','exists','null','truncate','status','show','lock','unique','having','drop','procedure','begin','end','delimiter','call','else','leave','declare','temporary','then']),e=b(['bigint','binary','bit','blob','bool','char','character','date','datetime','dec','decimal','double','enum','float','float4','float8','int','int1','int2','int3','int4','int8','integer','long','longblob','longtext','mediumblob','mediumint','mediumtext','middleint','nchar','numeric','real','set','smallint','text','time','timestamp','tinyblob','tinyint','tinytext','varbinary','varchar','year']),f=b([':=','<','<=','==','<>','>','>=','like','rlike','in','xor','between']),g=/[*+\-<>=&|:\/]/,h={},i=(function(){function m(q,r){var s=q.next();
if(s=='@'||s=='$'){q.nextWhileMatches(/[\w\d]/);return 'sql-var';}else if(s=='['){r(n(s));return null;}else if(s=='"'||s=="'"||s=='`'){r(o(s));return null;}else if(s==','||s==';')return 'sql-separator';else if(s=='#'){while(!q.endOfLine())q.next();return 'sql-comment';}else if(s=='-'){if(q.peek()=='-'){while(!q.endOfLine())q.next();return 'sql-comment';}else if(/\d/.test(q.peek())){q.nextWhileMatches(/\d/);if(q.peek()=='.'){q.next();q.nextWhileMatches(/\d/);}return 'sql-number';}else return 'sql-operator';}else if(g.test(s)){if(s=='/'&&q.peek()=='*'){r(p('sql-comment','*/'));return null;}else{q.nextWhileMatches(g);return 'sql-operator';}}else if(/\d/.test(s)){q.nextWhileMatches(/\d/);if(q.peek()=='.'){q.next();q.nextWhileMatches(/\d/);}return 'sql-number';}else if(/[()]/.test(s))return 'sql-punctuation';else{q.nextWhileMatches(/[_\w\d]/);var t=q.get(),u;if(f.test(t))u='sql-operator';else if(d.test(t))u='sql-keyword';else if(c.test(t))u='sql-function';else if(e.test(t))u='sql-type';else u='sql-word';return{style:u,content:t};}};function n(q){return function(r,s){while(!r.endOfLine()){var t=r.next();if(t==']'){s(m);break;}}return 'sql-word';};};function o(q){return function(r,s){var t=false;while(!r.endOfLine()){var u=r.next();if(u==q&&!t){s(m);break;}t=h.extension=='T-SQL'?!t&&q==u&&r.equals(q):!t&&u=='\\';}return q=='`'?'sql-quoted-word':'sql-literal';};};function p(q,r){return function(s,t){while(!s.endOfLine()){if(s.lookAhead(r,true)){t(m);break;}s.next();}return q;};};return function(q,r){return tokenizer(q,r||m);};})();function j(m){return function(n){var o=n&&n.charAt(0),p=m&&o==m.type;if(!m)return 0;else if(m.align)return m.col-(p?m.width:0);else return m.indent+(p?0:indentUnit);};};function k(m){var n=i(m),o=null,p=0,q=0;function r(u,v,w){o={prev:o,indent:p,col:q,type:u,width:v,align:w};};function s(){o=o.prev;};var t={next:function(){var u=n.next(),v=u.style,w=u.content,x=u.value.length;if(w=='\n'){u.indentation=j(o);p=q=0;if(o&&o.align==null)o.align=false;}else if(v=='whitespace'&&q==0)p=x;else if(!o&&v!='sql-comment')r(';',0,false);if(w!='\n')q+=x;if(v=='sql-punctuation'){if(w=='(')r(')',x);else if(w==')')s();}else if(v=='sql-separator'&&w==';'&&o&&!o.prev)s();return u;},copy:function(){var u=o,v=p,w=q,x=n.state;return function(y){n=i(y,x);o=u;p=v;q=w;return t;};}};return t;};function l(m){for(var n in m){if(m.hasOwnProperty(n))h[n]=m[n];}};return{make:k,electricChars:')',configure:l};})();
