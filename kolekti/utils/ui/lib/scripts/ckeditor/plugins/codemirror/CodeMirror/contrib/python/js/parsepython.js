var PythonParser=Editor.Parser=(function(){function b(J){return new RegExp('^(?:'+J.join('|')+')$');};var c='py-delimiter',d='py-literal',e='py-error',f='py-operator',g='py-identifier',h='py-string',i='py-bytes',j='py-unicode',k='py-raw',l='normal',m='string',n='+-*/%&|^~<>',o=b(['==','!=','\\<=','\\>=','\\<\\>','\\<\\<','\\>\\>','\\/\\/','\\*\\*']),p='()[]{}@,:`=;',q=['\\+=','\\-=','\\*=','/=','%=','&=','\\|=','\\^='],r=b(['//=','\\>\\>=','\\<\\<=','\\*\\*=']),s=n+p+'=!',t='=<>*/',u=/[_A-Za-z]/,v=b(['and','or','not','is','in']),w=['as','assert','break','class','continue','def','del','elif','else','except','finally','for','from','global','if','import','lambda','pass','raise','return','try','while','with','yield'],x=['bool','classmethod','complex','dict','enumerate','float','frozenset','int','list','object','property','reversed','set','slice','staticmethod','str','super','tuple','type'],y={types:['basestring','buffer','file','long','unicode','xrange'],keywords:['exec','print'],version:2},z={types:['bytearray','bytes','filter','map','memoryview','open','range','zip'],keywords:['nonlocal'],version:3},A,B,C,D,E,F;function G(J){if(!J.hasOwnProperty('pythonVersion'))J.pythonVersion=2;if(!J.hasOwnProperty('strictErrors'))J.strictErrors=true;if(J.pythonVersion!=2&&J.pythonVersion!=3){alert('CodeMirror: Unknown Python Version "'+J.pythonVersion+'", defaulting to Python 2.x.');J.pythonVersion=2;}if(J.pythonVersion==3){A=z;D=/[\'\"rbRB]/;E=/[rb]/;q.push('\\-\\>');}else{A=y;D=/[\'\"RUru]/;E=/[ru]/;}F=J;B=b(w.concat(A.keywords));C=b(x.concat(A.types));doubleDelimiters=b(q);};var H=(function(){function J(L,M){var N,O,P,Q,R,S={},T=L.next();function U(Z,aa){if(!S.style&&!S.content)return Z;else if(typeof Z==m)Z={content:L.get(),style:Z};if(S.style||aa)Z.style=aa?aa:S.style;if(S.content)Z.content=S.content+Z.content;S={};return Z;};if(T=='#'){while(!L.endOfLine())L.next();return 'py-comment';}if(T=='\\'){if(!L.endOfLine()){var V=true;while(!L.endOfLine()){if(!/[\s\u00a0]/.test(L.next()))V=false;}if(!V)return e;}return 'py-special';}if(s.indexOf(T)!=-1||T=='.'&&!L.matches(/\d/)){if(t.indexOf(L.peek())!=-1){P=T+L.peek();if(o.test(P)){L.next();var W=L.peek();if(W&&r.test(P+W)){L.next();return c;}else return f;}else if(doubleDelimiters.test(P)){L.next();return c;}}if(n.indexOf(T)!=-1||T=='.')return f;else if(p.indexOf(T)!=-1){if(T=='@'&&L.matches(/\w/)){L.nextWhileMatches(/[\w\d_]/);return{style:'py-decorator',content:L.get()};}else return c;}else return e;}if(/\d/.test(T)||T=='.'&&L.matches(/\d/)){if(T==='0'&&!L.endOfLine()){switch(L.peek()){case 'o':case 'O':L.next();
L.nextWhileMatches(/[0-7]/);return U(d,e);case 'x':case 'X':L.next();L.nextWhileMatches(/[0-9A-Fa-f]/);return U(d,e);case 'b':case 'B':L.next();L.nextWhileMatches(/[01]/);return U(d,e);}}L.nextWhileMatches(/\d/);if(T!='.'&&L.peek()=='.'){L.next();L.nextWhileMatches(/\d/);}if(L.matches(/e/i)){L.next();if(L.peek()=='+'||L.peek()=='-')L.next();if(L.matches(/\d/))L.nextWhileMatches(/\d/);else return U(e);}if(L.matches(/j/i))L.next();return U(d);}if(D.test(T)){var X=L.peek(),Y=h;if(E.test(T)&&(X=='"'||X=="'")){switch(T.toLowerCase()){case 'b':Y=i;break;case 'r':Y=k;break;case 'u':Y=j;break;}T=L.next();N=T;if(L.peek()!=N){M(K(Y,N));return null;}else{L.next();if(L.peek()==N){L.next();O=N+N+N;M(K(Y,O));return null;}else return Y;}}else if(T=="'"||T=='"'){N=T;if(L.peek()!=N){M(K(Y,N));return null;}else{L.next();if(L.peek()==N){L.next();O=N+N+N;M(K(Y,O));return null;}else return Y;}}}if(u.test(T)){L.nextWhileMatches(/[\w\d_]/);R=L.get();if(v.test(R))Q=f;else if(B.test(R))Q='py-keyword';else if(C.test(R))Q='py-type';else{Q=g;while(L.peek()=='.'){L.next();if(L.matches(u))L.nextWhileMatches(/[\w\d]/);else{Q=e;break;}}R+=L.get();}return U({style:Q,content:R});}if(/\$\?/.test(T))return U(e);return U(e);};function K(L,M){return function(N,O){var P=[],Q=false;while(!Q&&!N.endOfLine()){var R=N.next(),S=[];if(R=='\\'){if(N.peek()=='\n')break;R=N.next();}if(R==M.charAt(0))P.push(M);for(var T=0;T<P.length;T++){var U=P[T];if(U.charAt(0)==R){if(U.length==1){O(J);Q=true;break;}else S.push(U.slice(1));}}P=S;}return L;};};return function(L,M){return tokenizer(L,M||J);};})();function I(J,K){if(!B)G({});K=K||0;var L=H(J),M=null,N=K,O={prev:null,endOfScope:false,startNewScope:false,level:K,next:null,type:l};function P(T,U){U=U?U:l;O={prev:O,endOfScope:false,startNewScope:false,level:T,next:null,type:U};};function Q(T){T=T?T:false;if(O.prev){if(T){O=O.prev;O.next=null;}else{O.prev.next=O;O=O.prev;}}};function R(T){var U;return function(V,W,X){if(X===null||X===undefined){if(V)while(T.next)T=T.next;return T.level;}else if(X===true){if(W==T.level){if(T.next)return T.next.level;else return T.level;}else{U=T;while(U.prev&&U.prev.level>W)U=U.prev;return U.level;}}else if(X===false){if(W>T.level)return T.level;else if(T.prev){U=T;while(U.prev&&U.prev.level>=W)U=U.prev;if(U.prev)return U.prev.level;else return U.level;}}return T.level;};};var S={next:function(){var T=L.next(),U=T.style,V=T.content;if(M){if(M.content=='def'&&U==g)T.style='py-func';if(M.content=='\n'){var W=O;if(U=='whitespace'&&O.type==l){if(T.value.length<O.level){while(T.value.length<O.level)Q();
if(T.value.length!=O.level){O=W;if(F.strictErrors)T.style=e;}else O.next=null;}}else if(O.level!==K&&O.type==l){while(K!==O.level)Q();if(O.level!==K){O=W;if(F.strictErrors)T.style=e;}}}}switch(U){case h:case i:case k:case j:if(O.type!==m)P(O.level+1,m);break;default:if(O.type===m)Q(true);break;}switch(V){case '.':case '@':if(V!==T.value)T.style=e;break;case ':':if(O.type===l)O.startNewScope=O.level+indentUnit;break;case '(':case '[':case '{':P(N+V.length,'sequence');break;case ')':case ']':case '}':Q(true);break;case 'pass':case 'return':if(O.type===l)O.endOfScope=true;break;case '\n':N=K;if(O.endOfScope){O.endOfScope=false;Q();}else if(O.startNewScope!==false){var X=O.startNewScope;O.startNewScope=false;P(X,l);}T.indentation=R(O);break;}if(V!='\n')N+=T.value.length;M=T;return T;},copy:function(){var T=O,U=L.state;return function(V){L=H(V,U);O=T;return S;};}};return S;};return{make:I,electricChars:'',configure:G};})();
