var tokenizeScheme=(function(){var b=function(o){return o!='\n'&&/^[\s\u00a0]*$/.test(o);},c=function(o,p){var q=false;for(;;){if(o.endOfLine())return true;var r=o.next();if(r==p&&!q)return false;q=!q&&r=='\\';}return false;},d=function(o,p){while(!o.endOfLine())o.next();},e=/[0-9A-Fa-f]/,f=new RegExp('[\\s\\u00a0]'),g=new RegExp("[\\s\\(\\)\\[\\]\\{\\}\\\"\\,\\'\\`\\;]"),h=new RegExp("[^\\s\\(\\)\\[\\]\\{\\}\\\"\\,\\'\\`\\;]"),i='(?:(?:\\d+\\/\\d+)|(?:(?:\\d+\\.\\d+|\\d+\\.|\\.\\d+)(?:[eE][+\\-]?\\d+)?)|(?:\\d+(?:[eE][+\\-]?\\d+)?))',j=[new RegExp('^((?:(?:\\#[ei])?[+\\-]?'+i+')?'+'(?:[+\\-]'+i+')i$)'),/^((?:\#[ei])?[+-]inf.0)$/,/^((?:\#[ei])?[+-]nan.0)$/,new RegExp('^((?:\\#[ei])?[+\\-]?'+i+'$)'),new RegExp('^0[xX][0-9A-Fa-f]+$')],k=function(o){for(var p=0;p<j.length;p++){if(j[p].test(o))return true;}return false;},l=function(o,p){var q=function(){var u=o.get();return{type:'whitespace',style:'whitespace',content:u};},r=o.peek();if(r==='\n'){o.next();return q();}else{var s=c(o,'"');if(s)p(l);else p(m);var t=o.get();return{type:'string',style:'scheme-string',content:t,isUnclosed:s};}},m=function(o,p){var q=function(){o.nextWhileMatches(h);var x=o.get();if(k(x))return{type:'number',style:'scheme-number',content:x};else return{type:'variable',style:'scheme-symbol',content:x};},r=function(x){var y=c(o,x);if(y)p(l);var z=o.get();return{type:'string',style:'scheme-string',content:z,isUnclosed:y};},s=function(){var x;if(o.equals(';')){o.next();x=o.get();return{type:x,style:'scheme-symbol',content:x};}else{x=o.get();return{type:'symbol',style:'scheme-symbol',content:x};}},t=function(){d(o);var x=o.get();return{type:'comment',style:'scheme-comment',content:x};},u=function(){o.nextWhile(b);var x=o.get();return{type:'whitespace',style:'whitespace',content:x};},v=function(){var x=o.get();return{type:'whitespace',style:'whitespace',content:x};},w=o.next();if(w==='\n')return v();else if(f.test(w))return u();else if(w==='#')return s();else if(w===';')return t();else if(w==='"')return r(w);else if(g.test(w))return{type:w,style:'scheme-punctuation'};else return q();},n=function(o,p){var q={state:p,take:function(r){if(typeof r=='string')r={style:r,type:r};r.content=(r.content||'')+o.get();r.value=r.content;return r;},next:function(){if(!o.more())throw StopIteration;var r;while(!r)r=q.state(o,function(t){q.state=t;});var s=this.take(r);return s;}};return q;};return function(o,p){return n(o,p||m);};})();
