function MirrorFrame(b,c){this.home=document.createElement('div');if(b.appendChild)b.appendChild(this.home);else b(this.home);var d=this;function e(f,g){var h=document.createElement('input');h.type='button';h.value=f;d.home.appendChild(h);h.onclick=function(){d[g].call(d);};};e('Search','search');e('Replace','replace');e('Current line','line');e('Jump to line','jump');e('Insert constructor','macro');e('Indent all','reindent');this.mirror=new CodeMirror(this.home,c);};MirrorFrame.prototype={search:function(){var b=prompt('Enter search term:','');if(!b)return;var c=true;do{var d=this.mirror.getSearchCursor(b,c);c=false;while(d.findNext()){d.select();if(!confirm('Search again?'))return;}}while(confirm('End of document reached. Start over?'))},replace:function(){var b=prompt('Enter search string:',''),c;if(b)c=prompt('What should it be replaced with?','');if(c==null)return;var d=this.mirror.getSearchCursor(b,false);while(d.findNext())d.replace(c);},jump:function(){var b=prompt('Jump to line:','');if(b&&!isNaN(Number(b)))this.mirror.jumpToLine(Number(b));},line:function(){alert('The cursor is currently at line '+this.mirror.currentLine());this.mirror.focus();},macro:function(){var b=prompt('Name your constructor:','');if(b)this.mirror.replaceSelection('function '+b+'() {\n  \n}\n\n'+b+'.prototype = {\n  \n};\n');},reindent:function(){this.mirror.reindent();}};
