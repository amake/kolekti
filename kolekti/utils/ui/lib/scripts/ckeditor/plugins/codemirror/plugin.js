CKEDITOR.plugins.add('codemirror',{requires:['sourcearea'],init:function(a){function b(){a.fire('change');a.textarea.setValue(a.kcm.getCode());};var c=this.path;CKEDITOR.scriptLoader.load(c+'/js/codemirror.js',function(d){if(d)a.on('mode',function(){if(a.mode=='source'){var e=a.textarea,f=e.getParent(),g=f.$.clientHeight+'px',h=CodeMirror.fromTextArea(e.$,{parserfile:['parsexml.js'],stylesheet:[c+'css/xmlcolors.css'],height:g,path:c+'js/',passDelay:300,passTime:35,continuousScanning:1000,lineNumbers:false,textWrapping:false,enterMode:'flat',onChange:b});a.kcm=h;a.on('beforeCommandExec',function(i){i.removeListener();e.setValue(h.getCode());a.fire('dataReady');});CKEDITOR.plugins.mirrorSnapshotCmd={exec:function(i){if(i.mode=='source'){e.setValue(h.getCode());i.fire('dataReady');}}};a.addCommand('mirrorSnapshot',CKEDITOR.plugins.mirrorSnapshotCmd);}});});}});
